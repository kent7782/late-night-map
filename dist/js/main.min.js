!function(e,n){function o(){k=new google.maps.Map(n.getElementById("map"),{center:_,zoom:9,mapTypeControl:!1,styles:initialStyle,draggableCursor:"crosshair",disableDoubleClickZoom:!0}),T={path:google.maps.SymbolPath.CIRCLE,fillColor:"#FFFFFF",fillOpacity:.4,scale:9,strokeColor:"#212121",strokeWeight:.2},t(),F=new google.maps.InfoWindow,L=new google.maps.places.PlacesService(k),N.addEventListener("submit",function(e){e.preventDefault(),F.close(),a()}),k.addListener("click",function(){F.close()}),k.addListener("dblclick",function(e){i(e.latLng,k),F.close()}),j.addEventListener("click",function(e){e.preventDefault(),F.close(),B?f("Please enable location tracking on your browser.",3e3):t()})}function t(){P?m(S):navigator.geolocation?(p("Locating.."),navigator.geolocation.getCurrentPosition(function(e){S={lat:e.coords.latitude,lng:e.coords.longitude},a(S),k.setOptions({styles:mainStyle}),r(S)},function(){B=!0,k.setOptions({styles:mainStyle}),g()})):(f("Your browser does not support location",3500),k.setOptions({styles:mainStyle}))}function i(e,n){n.panTo(e),E?E.setPosition(e):E=new google.maps.Marker({position:e,icon:v(T,{fillColor:"red",scale:10}),map:n}),g()}function a(e){if(I=n.getElementById("search-box").value,!I)return void f("Please enter a keyword.",2e3);C&&C!==I&&b();var o=15e4,t={location:"",radius:o/k.getZoom(),keyword:I,openNow:!0};if(e)t.location=e;else{if(!E)return void f("Double-click on the map to drop a pin for searching.",3500);var i=new google.maps.LatLng(E.getPosition().lat(),E.getPosition().lng());t.location=i}s(t),m(t.location),C=I}function s(e){p("Searching.."),L.radarSearch(e,function(e,n,o){n==google.maps.places.PlacesServiceStatus.OK?(l(e),f(e.length+' "'+I+'" places are still open.',3e3)):f("No place found.. Zoom to another area and try again.",3500)})}function l(e){for(var n=0;n<e.length;n++){var o=e[n],t=o.geometry.location,i=new google.maps.LatLng(t.lat(),t.lng());O[o.place_id]||(c(i,o),O[o.place_id]=o)}}function c(e,n){var o=v(T,{fillColor:"#FFFF00"}),t=v(o,{scale:o.scale+3}),i=new google.maps.Marker({position:e,icon:o,map:k});M.push(i),i.addListener("mouseover",function(){this.setIcon(t)}),i.addListener("mouseout",function(){this.setIcon(o)}),i.addListener("click",function(){d(n.place_id,function(e){u(this,e)}.bind(this))})}function r(e){var n=v(T,{fillColor:"blue",fillOpacity:.3,scale:10}),o=v(n,{scale:13});P=new google.maps.Marker({position:e,icon:n,map:k}),P.addListener("mouseover",function(){this.setIcon(o)}),P.addListener("mouseout",function(){this.setIcon(n)}),P.addListener("click",function(){F.setContent("<p>You're here, in the dark.<p>"),F.open(k,this)})}function d(e,n){if(D[e])n(D[e]);else{var o={placeId:e};L.getDetails(o,function(o,t){n(o),D[e]=o})}}function u(e,o){var t='<div class="info-window"><h1 class="info-header">'+o.name+'</h1><div class="info-content"><p><b>Address: </b>'+o.formatted_address+'</p><p id="phone"><b>Phone Number: </b>'+o.formatted_phone_number+"</p><p><b>Hours Today: </b>"+o.opening_hours.weekday_text[w()]+'</p><p id="website"><a href="'+o.website+'" target="_blank">Visit Webstie</a></p></div></div>';F.setContent(t),F.open(k,e),o.website||(n.getElementById("phone").style.display="none"),o.website||(n.getElementById("website").style.display="none")}function p(e){A.innerHTML=e,Y.style.display="none",W.style.display="none",j.style.display="none",A.style.display="inline-block"}function g(){Y.style.display="inline-block",W.style.display="inline-block",j.style.display="inline-block",A.style.display="none"}function f(e,n){p(e),setTimeout(function(){g()},n)}function m(e){k.panTo(e),y(k,14,k.getZoom())}function y(e,n,o){o>=n||(z=google.maps.event.addListener(e,"zoom_changed",function(t){google.maps.event.removeListener(z),y(e,n,o+1)}),setTimeout(function(){e.setZoom(o)},65))}function b(){h(null),O={},M=[]}function h(e){for(var n=0;n<M.length;n++)M[n].setMap(e)}function v(e,n){return Object.assign({},e,n)}function w(){var e;const n=1,o=1;return e=H<=5?x-n-o:x-n,e<0&&(e+=7),e}var k,L,I,C,E,F,P,S,_={lat:37.9,lng:-122.9},B=!1,M=[],D={},O={},T={},Z=new Date,x=Z.getDay(),H=Z.getHours(),N=n.getElementById("search-form"),W=n.getElementById("search-box"),Y=n.getElementById("search-btn"),j=n.getElementById("locate-btn"),A=n.getElementById("message");revealingModule={initMap:o}}(window,document);